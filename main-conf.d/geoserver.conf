<VirtualHost *:80>
    ServerName geoserver
    ServerAlias geoserver.*

    # Force SSL for Web Admin
    RewriteEngine on
    RewriteCond %{HTTPS} off
    RewriteRule /geoserver/web/.* https://%{HTTP_HOST}%{REQUEST_URI} [R=302]

    ProxyPreserveHost on
    ProxyPass / http://localhost:8080/ retry=0
    ProxyPassreverse / http://localhost:8080/
</VirtualHost>

<VirtualHost *:443>
    SSLEngine on
    ServerName geoserver
    ServerAlias geoserver.*
    ProxyPreserveHost on
    ProxyPass / http://localhost:8080/ retry=0
    ProxyPassreverse / http://localhost:8080/
</VirtualHost>
